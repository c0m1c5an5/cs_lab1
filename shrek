У Шрека и Фионы медовый месяц. Вернувшись домой, они получают послание от родителей Фионы — короля и королевы Тридевятого королевства. Фиона уговаривает мужа поехать, утверждая, что отец с матерью будут рады их видеть. Шрек не хочет ехать — он привык к другой реакции на себя, к тому же он не уверен, что королевская семья положительно отнесётся к их визиту. В конце концов, супруги оставляют дом на попечение сказочных существ и вместе с Ослом (который напросился с ними, так как у него разлад отношений с Драконихой), уезжают на своей карете-луковице в гости к папе и маме Фионы.
Но когда король Гарольд видит дочь и зятя, то особой радости не испытывает. Королева Лиллиан, напротив, пытается быть дипломатичной и принять дочь такой, какая она есть, а заодно и её мужа. Но Гарольд винит во всём Шрека, который не дал «его девочке» остаться прекрасной принцессой. Короля так же пугают перспективы внуков-огров. В итоге во время ужина между ним и Шреком происходит ссора.
Далее выясняется, что по первоначальному плану короля Фиону должен был освободить и взять в жёны прекрасный принц Чарминг (от англ. charming — очаровательный), но он опоздал и принцессу уже спас Шрек. За спиной принца стоит его мать — Фея-крёстная Фионы, богатая и могущественная владелица крупнейшего зельеварочного завода. Когда-то Крёстная помогла королю Гарольду самому жениться на принцессе Лиллиан, и теперь он — должник Крёстной. По её плану, дочь Гарольда должна была выйти замуж за Чарминга, чтобы тем самым открыть честолюбивой Крёстной путь к завладению королевским наследством.
Теперь Крёстная шантажом вынуждает короля исполнить уговор и избавиться от Шрека. Ночью Король тайно прибывает в таверну «Ядовитое яблочко», для того чтобы найти и нанять киллера, который бы смог разобраться с великаном. По наводке барменши — одной из уродливых сестёр Золушки — Гарольд нанимает «головореза». Им оказывается Кот в сапогах. Он берёт заказ на убийство, однако, встретив огра в лесу, проваливает задание: Шрек, которого тесть хитростью выманил в лес якобы на утреннюю примирительную охоту, обезоруживает Кота, но оставляет его в живых. В знак благодарности несостоявшийся киллер сообщает огру, кто его нанял. Великан ошеломлён таким поворотом событий.
Шрек с друзьями направляются на волшебную фабрику Крёстной, где хотят получить совет Феи, не догадываясь о её роли в этой истории. Крёстная советует огру оставить принцессу в покое для её же блага. Тем не менее, компания похищает у неё со склада волшебный эликсир (попутно разгромив фабрику). По пути Осёл пробует зелье, а затем его выпивает и Шрек. Начинается дождь, и герои решают заночевать в амбаре, где с ними за ночь происходит волшебная трансформация. Наутро Шрек просыпается в человеческом обличье, Осёл тоже изменился и стал прекрасным белым жеребцом. Чтобы заклятие не потеряло силу и принесло счастье, до полуночи надо встретить суженую и поцеловать её. Шрек добывает себе приличную одежду и едет во дворец к жене, надеясь решить все их проблемы — ведь теперь он человек и это должно устроить короля и королеву.
В замке с Фионой тоже происходит метаморфоза, и она утром просыпается в человеческом облике. От появившегося Осла-Жеребца она узнаёт о преображении, но сама при этом ещё не видела Шрека в новом облике. Этим решают воспользоваться Крёстная и её сын. Чарминг проникает в замок и прикидывается преобразившимся Шреком. Фея встаёт на пути настоящего Шрека и показывает ему издали Фиону и Чарминга: именно он, по мнению Крёстной, достойная для неё пара, а Шрек должен отказаться от Фионы во имя любви и ради её же блага. Подавленный Шрек решает поступить благородно и в компании Осла-Жеребца и Кота покидает замок идёт в «Ядовитое яблочко», где пытается залить своё горе.
В это время в таверне проходит тайная встреча Крёстной, Чарминга и короля Гарольда. Король уже понял, что Фионе не по душе прикинувшийся Шреком Чарминг, она хочет своего мужа назад. Гарольд пытается уговорить Крёстную остановиться. Но Крёстная даёт королю такой же эликсир, что украл и выпил Шрек: если принцесса выпьет его и под действием чар поцелует Чарминга, тот станет её суженым, а Фиона останется человеком.
Шрек, Осёл-Жеребец и Кот подслушивают этот разговор, но нечаянно выдают себя и попадают в тюрьму. Однако им помогают выбраться их друзья — сказочные персонажи: Пиноккио, Серый Волк, три поросёнка, слепые мыши и Пряня, узнавшие о том, что произошло. Создатель Пряни — пекарь Кекс — по просьбе Шрека изготавливает гигантского пряничного человечка, на котором герои штурмуют замок, где в тот момент идёт грандиозный бал в честь принцессы и её мужа. Фиона не может узнать Шрека в тщеславном красавчике. Она постоянно отказывает ему в поцелуе. Фея решает поддержать атмосферу между своим сыном и Фионой, исполняя песню «Я жду героя». Когда Чармингу почти удаётся добиться поцелуя, Шрек на Осле-Жеребце врывается на праздник. Пиноккио, слепые мыши, Пряня и другие сообщники Шрека отнимают у Феи палочку, а Чарминг целует Фиону, но почему-то подлитый королём Гарольдом в чай эликсир не срабатывает, и принцесса, осознав обман, нокаутирует принца Чарминга ударом головой. Герои отвлекаются, и Крёстная решает закончить историю по-своему, попытавшись убить великана заклинанием из возвращённой себе палочки, но в этот момент Шрека спасает Гарольд, заслонив своим телом. Заклинание, частично срикошетив от доспехов короля, попадает в саму Фею, и она погибает, распавшись на множество мыльных пузырей.
Часы начинают бить полночь, Шрек рассказывает про эликсир и пытается поцеловать жену, но она отказывается и ждёт, пока они опять не превратятся в огров (Осёл, соответственно, вновь становится ослом). Затем оказывается, что король Гарольд в результате попадания в него заклинания из волшебной палочки стал лягушкой, и тут раскрывается причина его сотрудничества с Крёстной: когда-то он, лягушонок, влюбившийся в принцессу Лиллиан, обратился к Фее, получил от неё человеческий облик, женился на возлюбленной и стал королём, но при этом всю жизнь отдавал долг Крёстной. Однако в последний момент он, ведомый любовью к дочери, подсунул ей чашку с простым чаем, а эликсир от Крёстной выпил сам — и вот ему с последним ударом часов возвращён первоначальный облик, ведь Лиллиан не успела его поцеловать на этот раз. Гарольд-лягушка просит прощения у жены и благословляет брак Шрека с Фионой. В конце мультфильма Кот и Осёл устраивают грандиозную вечеринку и вместе поют песню Рики Мартина — «Livin' la Vida Loca».
Сцена после титров: Осёл грустно напевает песню «All by Myself», Кот пытается его развеселить, говоря, что найдёт ему ослицу, и приглашая в клуб «Кит-Кат», но вдруг неожиданно прилетает Дракониха с детьми — драконоосликами. А дальше идёт пародия на программу «Американский идол».